const handleFinish = async () => {
    if (selected) {
        const selectedUser = users.find(user => user.name === selected);
        if (!selectedUser) return;

        try {
            await UserService.assignUser(selectedUser.id, selectedUser.igg); // Envoie au backend
            onAssign(); // Action côté parent
            onClose(); // Ferme la popup
        } catch (err) {
            console.error("Erreur d'envoi au backend:", err);
            alert("Erreur lors de l'envoi de l'utilisateur sélectionné.");
        } finally {
            setSelected(null);
        }
    }
};

static async assignUser(id: number, igg: string): Promise<void> {
    return fetch("/api/assign-user", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ id, igg }),
    }).then((res) => {
        if (!res.ok) throw new Error("Échec de l'envoi au backend.");
    });
}

