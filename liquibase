package com.socgen.unibank.controllers;

import com.socgen.unibank.services.KpiService;
import lombok.RequiredArgsConstructor;
import org.springframework.web.bind.annotation.*;

import java.util.Map;

@RestController
@RequestMapping("/api/kpi")
@RequiredArgsConstructor
public class KpiController {

    private final KpiService kpiService;

    @GetMapping("/weekly")
    public Map<String, Object> getIncidentsByWeek() {
        return kpiService.getIncidentsByWeek();
    }

    @GetMapping("/priorite")
    public Map<String, Object> getIncidentsByPriorite() {
        return kpiService.getIncidentsByPriorite();
    }

    @GetMapping("/gravite")
    public Map<String, Object> getIncidentsByGravite() {
        return kpiService.getIncidentsByGravite();
    }

    @GetMapping("/services")
    public Map<String, Object> getIncidentsByService() {
        return kpiService.getIncidentsByService();
    }

    @GetMapping("/resolution-time")
    public Map<String, Object> getAverageResolutionTime() {
        return kpiService.getAvgResolutionTime();
    }
}
